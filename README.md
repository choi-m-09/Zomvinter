# 게임 소개
![image](https://github.com/choi-m-09/Zomvinter/assets/80871047/34ca965d-6f5f-4f0a-9140-f1c2aa847b14)

인디 게임인 Long Vinter, Project_Zomboid 등 여러 게임에서 레퍼런스를 얻어 제작한 3D 쿼터뷰 생존 게임 입니다. 현재 튜토리얼 단계까지 개발되었으며 차후 기능 추가 및 컨텐츠를 늘릴 예정입니다.
# 플레이 영상
https://www.youtube.com/watch?v=zgkwzUstLhE
# 주요 기능
## 플레이어 및 카메라 무브먼트
### 플레이어
플레이어는 PlayerController를 상속받고 있으며 부모 클래스에서 이동 및 회전 함수가 구현되어 있습니다. 회전은 ScreenPointToRay 함수를 통하여 메인 카메라 방향으로 Ray를 발사한 위치 값과 플레이어 위치 값를 빼주어  Normalize 하여 내부 함수인 LookRotation의 인자로 전달하여 마우스 방향으로 회전하도록 설계하였습니다. 이동은 내부 함수인 Translate의 인자로 Axis 값(Left, Right)과 과 카메라 Transform을 전달하여 카메라가 바라보고 있는 방향으로 이동합니다. 플레이어가 총을 장착하면 플레이어 등 뒤에 총 오브젝트가 나타나고 1번 또는 2번을 누르면 총이 플레이어 손에 오도록 구현하였습니다. X를 누르면 총이 장착 해제되며 다시 플레이어 등으로 돌아갑니다. 총을 들고있는 경우 마우스 오른쪽 클릭을 통하여 Aim 상태로 전환할 수 있고 마우스 왼쪽 클릭 시 Bullet이 Instantiate 됩니다. 왼쪽 Shift를 누르면 달릴 수 있지만 스테미너가 적다면 달릴 수 없습니다. 

플레이어는 상태 기계 패턴(FSM)을 기반으로 Cycle이 흘러갑니다. 살아있는 상태(Alive)인 경우 허기, 갈증이 시간이 지남에 따라 줄어들고 0이 되면 체력이 지속적으로 깎이고, 스테미너는 시간이 지남에 따라 자동으로 회복됩니다.
체력이 0이 되면 Dead 상태로 전이되고 Game Over 됩니다.
### 카메라
카메라는 키보드 Q, E를 통해 양방향으로 회전할 수 있으며 내부 함수 Slerp를 사용하여 부드럽게 움직일 수 있도록 구현하였습니다. 또한 Mouse Wheel Axis값을 기반으로 카메라 Zoom In/Out을 구현하였습니다.

## 인벤토리 및 아이템 시스템
### 아이템
아이템의 이름, ID, 타입 등 공통 변수 및 정적 변수들을 저장할 아이템 데이터 클래스와 아이템의 실체이며 아이템 수량, 총의 장탄수와 같은 동적 변수들과 아이템의 동작 메소드 및 인터페이스를 저장하는 클래스로 나누어 설계하였습니다. 아이템 데이터 클래스에서 공통 변수 및 정적 변수들을 Scriptable Object 클래스를 상속하여 데이터 사본만을 저장함으로써 메모리 사용을 최소화 하고, 유니티 내에서 에셋 형태로 관리할 수 있도록 설계하였습니다. 아이템 데이터의 클래스 구조는 다음과 같습니다.
![image](https://github.com/choi-m-09/Zomvinter/assets/80871047/203de148-a4fa-4e6c-abf0-06e61c581415)
재료 아이템 및 회복 아이템 등 수량이 있는 아이템과 총, 칼, 방어구 같은 내구도가 있고 착용 가능한 아이템을 구분하여 각각의 타입에 맞는 필드값을 세팅하였습니다. 아이템 클래스도 위와 동일하지만 동적 변수와 각 아이템의 메소드 및 인터페이스가 구현되어 있으며, 고정 데이터 값은 아이템 데이터 스크립터블 오브젝트를 참조하여 데이터를 불러오도록 설계하였습니다.
### 인벤토리
![image](https://github.com/choi-m-09/Zomvinter/assets/80871047/b92b322a-d940-4ad4-8d19-992f43e2f990)
장착 가능한 슬롯들과 플레이어가 습득한 아이템을 담을 백팩 슬롯으로 인벤토리 슬롯 UI를 설계하였습니다. 아이템 우클릭 시 아이템 타입을 검사합니다. 장착 가능한 아이템의 경우 해당 아이템이 타입에 맞는 인벤토리 슬롯에 할당되어 이미지 및 텍스트가 표시되고 플레이어의 저장되어 있는 소켓의 위치로 아이템 오브젝트가 나타납니다. 사용 가능한 아이템 우클릭 시 수량이 줄어들고 해당 아이템에 구현되어 있는 인터페이스를 호출합니다.
### 상호작용 오브젝트
게임 내 곳곳에는 상호작용 가능한 오브젝트(상자, 가구)가 있고 가까이 다가가 F키를 눌러 상호작용 할 수 있습니다. 상호작용 시 게이지가 표시되며 게이지가 다 차면 해당 오브젝트 배열에 있는 아이템이 랜덤하게 생성되어 표시됩니다.

## Zombie
좀비는 3가지 종류가 있으며 공통적으로 Roaming을 하다가 일정 거리 안에 플레이어가 감지되면 플레이어를 쫒아가는 로직으로 구성되어 있습니다. 
근접 공격 시 애니메이션 이벤트로 함수가 호출됩니다. 공격 소켓 Transform 위치로 내부 함수 OverlapSphere를 사용하여 Sphere 콜라이더를 생성하고 충돌된 오브젝트들에 구현되어 있는 데미지 함수가 호출됩니다. 이 외 특수 좀비들은 다음과 같은 로직을 구현하였습니다.
+ 원거리 좀비 : 플레이어를 쫒다가 사거리 안에 도달하면 애니메이션 이벤트의 함수가 호출되며 원거리 공격을 수행합니다.
+ 탱크 좀비 : 플레이어를 쫒는 중 특수 공격을 수행합니다. 특수 공격 시 플레이어의 카메라에 Shake 이벤트가 발생합니다.



# 구동 방법
+ + Unity
